#!/bin/bash

cigarette=(
""
""
""
"  _________________"
"()___)_____________)"
"                   )"
"                  ("
"                   )"
"  _________________"
"()___)_____________#"
"                   )"
"                  ("
"                   )"
"  ________________"
"()___)____________##"
"                  )"
"                 ("
"                  )"
"  _______________"
"()___)___________##"
"                ("
"                 )"
"                ("
"  ______________"
"()___)__________##"
"               ("
"                )"
"               ("
"  _____________"
"()___)_________##"
"              ("
"               )"
"              ("
"  ____________"
"()___)________##"
"              )"
"             ("
"              )"
"  ___________"
"()___)_______##"
"             )"
"            ("
"             )"
"  __________"
"()___)______##"
"            )"
"           ("
"            )"
"  _________"
"()___)_____##"
"          ("
"           )"
"          ("
"  ________"
"()___)____##"
"         ("
"          )"
"         ("
"  _______"
"()___)___##"
"         ("
"          )"
"         ("
"  _______"
"()___)___##"
"         )"
"        ("
"         )"
"  ______"
"()___)__##"
"        )"
"       ("
"        )"
"  _____"
"()___)_##"
"       )"
"      ("
"       )"
"  ____"
"()___)##"
""
""
""
"  ____"
"()___)#"
)

if ! command -v $1 >/dev/null 2>&1; then echo "$1 not found"; exit 1; fi
eval "$@" >/dev/null 2>&1 &
pid=$!
i=1
for ii in {1..6}; do echo; done
while kill -0 $pid 2>/dev/null; do
	for ii in {1..5}; do
		printf "\033[A"
		printf "\r                    "
	done
	for ii in {1..5}; do
		printf "\r${cigarette[((i*5+ii-6))]}\n"
	done
	sleep 0.125
	((i < 17)) && ((i++)) || i=1
done
for ii in {1..5}; do
	printf "\033[A"
	printf "\r                    "
done
printf "\r"
